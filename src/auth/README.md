# Документация Модуля Аутентификации (auth)

## Обзор

Модуль аутентификации в нашем проекте на NestJS обеспечивает надежный и безопасный метод управления аутентификацией с
использованием JWT (JSON Web Tokens). Эта документация описывает структуру и функциональность модуля аутентификации,
который расположен в директории `auth`.

## Структура

Модуль состоит из трех основных файлов:

1. `auth.module.ts`
2. `jwt.strategy.ts`
3. `jwt-auth.guard.ts`

### auth.module.ts

Этот файл отвечает за настройку модуля аутентификации.

#### Импорты

- `PassportModule` и `JwtModule` из `@nestjs/jwt` и `@nestjs/passport` для обработки аутентификации.
- `ConfigService` из `@nestjs/config` для доступа к переменным конфигурации.
- `JwtStrategy` из текущей директории.

#### Конфигурация Модуля

- `PassportModule` регистрируется с использованием стратегии 'jwt'.
- `JwtModule` настраивается асинхронно, извлекая секретный ключ JWT из службы конфигурации.

### jwt.strategy.ts

Этот файл определяет стратегию JWT для аутентификации.

#### Импорты

- `PassportStrategy` из `@nestjs/passport` и `Strategy`, `ExtractJwt` из `passport-jwt` для обработки JWT.
- `ConfigService` для доступа к переменным конфигурации.

#### Класс: JwtStrategy

- Наследуется от `PassportStrategy`.
- Конфигурирует метод извлечения JWT и секретный ключ из конфигурации.
- Реализует метод `validate`, который возвращает ID пользователя и группы пользователей из полезной нагрузки (payload)
  JWT.

### jwt-auth.guard.ts

Этот файл создает защиту аутентификации на основе стратегии JWT.

#### Импорты

- `AuthGuard` из `@nestjs/passport`.

#### Класс: JwtAuthGuard

- Наследуется от `AuthGuard`.
- Настроен на использование стратегии 'jwt'.

## Использование

Для использования защиты аутентификации примените `JwtAuthGuard` к обработчикам маршрутов в контроллере. Это обеспечит
защиту маршрутов с помощью аутентификации JWT.

### Пример

```typescript
import {Controller, Get, UseGuards} from '@nestjs/common';
import {JwtAuthGuard} from './auth/jwt-auth.guard';

@Controller('protected')
export class ProtectedController {
  @Get()
  @UseGuards(JwtAuthGuard)
  getProtectedResource() {
    return "Этот маршрут защищен";
  }
}
```

В этом примере метод getProtectedResource в ProtectedController защищен аутентификацией JWT. Только аутентифицированные
пользователи с действительным JWT могут получить доступ к этому маршруту.

## Заключение

Модуль Аутентификации предоставляет безопасный и гибкий способ реализации аутентификации на основе JWT в приложении
NestJS. Он состоит из настраиваемых модулей, strategy и guard, что облегчает интеграцию в любую часть приложения,
требующую надежного контроля доступа.


